<script setup lang="ts">
import { useDarkMode } from '../composables/useDarkMode';
import { useLocalizedThemeConfig } from '../composables/useLocalizedThemeConfig';

const isDarkMode = useDarkMode();
const themeConfig = useLocalizedThemeConfig();

function toggle() {
  isDarkMode.value = !isDarkMode.value;
}
</script>

<template>
  <button
    v-if="themeConfig.darkMode.enabled ?? true"
    role="switch"
    :aria-label="themeConfig.darkMode.buttonAriaLabel"
    :aria-checked="isDarkMode"
    @click="toggle"
  >
    <svg
      class="sun"
      width="26"
      height="26"
      viewBox="0 0 26 26"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M13.0003 7.16675C11.4532 7.16675 9.9695 7.78133 8.87554 8.87529C7.78157 9.96925 7.16699 11.453 7.16699 13.0001C7.16699 14.5472 7.78157 16.0309 8.87554 17.1249C9.9695 18.2188 11.4532 18.8334 13.0003 18.8334C14.5474 18.8334 16.0312 18.2188 17.1251 17.1249C18.2191 16.0309 18.8337 14.5472 18.8337 13.0001C18.8337 11.453 18.2191 9.96925 17.1251 8.87529C16.0312 7.78133 14.5474 7.16675 13.0003 7.16675Z"
      />
      <path
        fill-rule="evenodd"
        clip-rule="evenodd"
        d="M13.0003 0.166748C13.3097 0.166748 13.6065 0.289664 13.8253 0.508457C14.0441 0.727249 14.167 1.024 14.167 1.33341V2.50008C14.167 2.8095 14.0441 3.10625 13.8253 3.32504C13.6065 3.54383 13.3097 3.66675 13.0003 3.66675C12.6909 3.66675 12.3942 3.54383 12.1754 3.32504C11.9566 3.10625 11.8337 2.8095 11.8337 2.50008V1.33341C11.8337 1.024 11.9566 0.727249 12.1754 0.508457C12.3942 0.289664 12.6909 0.166748 13.0003 0.166748ZM2.84216 2.84191C3.06094 2.6232 3.35763 2.50033 3.66699 2.50033C3.97635 2.50033 4.27304 2.6232 4.49182 2.84191L6.24182 4.59191C6.45434 4.81195 6.57194 5.10665 6.56928 5.41255C6.56662 5.71844 6.44392 6.01106 6.22761 6.22737C6.0113 6.44368 5.71869 6.56638 5.41279 6.56903C5.1069 6.57169 4.81219 6.4541 4.59216 6.24158L2.84216 4.49158C2.62344 4.2728 2.50057 3.97611 2.50057 3.66675C2.50057 3.35739 2.62344 3.0607 2.84216 2.84191ZM23.1585 2.84191C23.3772 3.0607 23.5001 3.35739 23.5001 3.66675C23.5001 3.97611 23.3772 4.2728 23.1585 4.49158L21.4085 6.24158C21.3009 6.35301 21.1721 6.44189 21.0298 6.50303C20.8875 6.56418 20.7344 6.59636 20.5795 6.59771C20.4245 6.59905 20.2709 6.56953 20.1275 6.51087C19.9842 6.45221 19.8539 6.36558 19.7444 6.25604C19.6348 6.1465 19.5482 6.01624 19.4895 5.87286C19.4309 5.72948 19.4014 5.57585 19.4027 5.42095C19.404 5.26604 19.4362 5.11295 19.4974 4.97061C19.5585 4.82827 19.6474 4.69954 19.7588 4.59191L21.5088 2.84191C21.7276 2.6232 22.0243 2.50033 22.3337 2.50033C22.643 2.50033 22.9397 2.6232 23.1585 2.84191ZM0.166992 13.0001C0.166992 12.6907 0.289908 12.3939 0.508701 12.1751C0.727493 11.9563 1.02424 11.8334 1.33366 11.8334H2.50033C2.80974 11.8334 3.10649 11.9563 3.32528 12.1751C3.54408 12.3939 3.66699 12.6907 3.66699 13.0001C3.66699 13.3095 3.54408 13.6062 3.32528 13.825C3.10649 14.0438 2.80974 14.1667 2.50033 14.1667H1.33366C1.02424 14.1667 0.727493 14.0438 0.508701 13.825C0.289908 13.6062 0.166992 13.3095 0.166992 13.0001ZM22.3337 13.0001C22.3337 12.6907 22.4566 12.3939 22.6754 12.1751C22.8942 11.9563 23.1909 11.8334 23.5003 11.8334H24.667C24.9764 11.8334 25.2732 11.9563 25.4919 12.1751C25.7107 12.3939 25.8337 12.6907 25.8337 13.0001C25.8337 13.3095 25.7107 13.6062 25.4919 13.825C25.2732 14.0438 24.9764 14.1667 24.667 14.1667H23.5003C23.1909 14.1667 22.8942 14.0438 22.6754 13.825C22.4566 13.6062 22.3337 13.3095 22.3337 13.0001ZM6.24182 19.7586C6.46054 19.9774 6.58341 20.2741 6.58341 20.5834C6.58341 20.8928 6.46054 21.1895 6.24182 21.4082L4.49182 23.1582C4.27179 23.3708 3.97709 23.4884 3.67119 23.4857C3.36529 23.483 3.07268 23.3603 2.85637 23.144C2.64006 22.9277 2.51736 22.6351 2.51471 22.3292C2.51205 22.0233 2.62964 21.7286 2.84216 21.5086L4.59216 19.7586C4.81094 19.5399 5.10763 19.417 5.41699 19.417C5.72635 19.417 6.02304 19.5399 6.24182 19.7586ZM19.7588 19.7586C19.9776 19.5399 20.2743 19.417 20.5837 19.417C20.893 19.417 21.1897 19.5399 21.4085 19.7586L23.1585 21.5086C23.371 21.7286 23.4886 22.0233 23.4859 22.3292C23.4833 22.6351 23.3606 22.9277 23.1443 23.144C22.928 23.3603 22.6354 23.483 22.3295 23.4857C22.0236 23.4884 21.7289 23.3708 21.5088 23.1582L19.7588 21.4082C19.5401 21.1895 19.4172 20.8928 19.4172 20.5834C19.4172 20.2741 19.5401 19.9774 19.7588 19.7586ZM13.0003 22.3334C13.3097 22.3334 13.6065 22.4563 13.8253 22.6751C14.0441 22.8939 14.167 23.1907 14.167 23.5001V24.6667C14.167 24.9762 14.0441 25.2729 13.8253 25.4917C13.6065 25.7105 13.3097 25.8334 13.0003 25.8334C12.6909 25.8334 12.3942 25.7105 12.1754 25.4917C11.9566 25.2729 11.8337 24.9762 11.8337 24.6667V23.5001C11.8337 23.1907 11.9566 22.8939 12.1754 22.6751C12.3942 22.4563 12.6909 22.3334 13.0003 22.3334Z"
      />
    </svg>

    <svg
      class="moon"
      width="22"
      height="22"
      viewBox="0 0 22 22"
      fill="none"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path
        d="M21.451 14.8792C21.689 14.3122 21.0088 13.8292 20.4383 14.0812C19.298 14.5818 18.0659 14.8393 16.8205 14.8372C11.938 14.8372 7.98067 10.9592 7.98067 6.17474C7.97888 4.55931 8.43783 2.97687 9.30367 1.61307C9.635 1.0904 9.23717 0.367069 8.6305 0.521069C3.95333 1.71457 0.5 5.8819 0.5 10.8391C0.5 16.7272 5.37083 21.5001 11.3803 21.5001C15.9303 21.5001 19.827 18.7642 21.451 14.8792Z"
      />
      <path
        d="M15.2128 0.620236C14.5945 0.207236 13.8572 0.944569 14.269 1.5629L15.004 2.6654C15.3022 3.11243 15.4613 3.63773 15.4613 4.17507C15.4613 4.71241 15.3022 5.23771 15.004 5.68474L14.269 6.78724C13.8572 7.40557 14.5957 8.1429 15.214 7.7299L16.3153 6.9949C16.7624 6.69674 17.2877 6.53763 17.825 6.53763C18.3623 6.53763 18.8876 6.69674 19.3347 6.9949L20.4372 7.7299C21.0555 8.1429 21.7928 7.40557 21.3798 6.78724L20.6448 5.68474C20.3467 5.23771 20.1876 4.71241 20.1876 4.17507C20.1876 3.63773 20.3467 3.11243 20.6448 2.6654L21.3798 1.5629C21.7928 0.944569 21.0555 0.207236 20.436 0.620236L19.3347 1.35524C18.8876 1.6534 18.3623 1.81251 17.825 1.81251C17.2877 1.81251 16.7624 1.6534 16.3153 1.35524L15.2128 0.620236Z"
      />
    </svg>
  </button>
</template>

<style scoped>
button {
  display: flex;
  align-items: center;
  justify-content: center;
  border: 0;
  margin: 0;
  padding: 0.5rem;
  border-radius: 0.125rem;
  cursor: pointer;
  background-color: transparent;
}

button:hover,
button:focus-visible {
  outline: 0;
  background-color: var(--color-bg-100);
}

svg {
  display: block;
}

path {
  fill: currentColor;
  color: var(--color-text);
}

html.dark .sun {
  display: none;
}

html.dark .moon {
  display: block;
}

html:not(.dark) .moon {
  display: none;
}
</style>
